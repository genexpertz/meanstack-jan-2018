<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="css/style.css" rel="stylesheet"/>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
</head>
<body>
<div class="row">
    <div class="col-4">&nbsp;</div>
    <div class="col-4">

             <form class="form">
                 <div class="form-group">
                <label for="mvname">Movie Name</label>
                <input name="mvname" id="mvname" type="text" width="100" max="100"/>
                 </div>
                 <div class="form-group">
                     <label for="mvrating">Movie Rating</label>
                <input name="mvrating" id="mvrating" type="text" width="5" max="1"/>
                <input type="button" value="Add" onclick="clickme()"/>
                 </div>
            </form>

        <ul class="list-group" id="mvlist">

        </ul>

    </div>
    <div class="col-4">

    </div>
</div>
<script src="assets/web/assets/jquery/jquery.min.js"></script>
<script src="assets/popper/popper.min.js"></script>
<script src="assets/tether/tether.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>

<script>

    function Movie(name, rating) {
        this.name = name;
        this.rating = rating;
    }

    function clickme() {

        var mvName = getMovieName();
        var mvRating = getMovieRating();

        var oldMovies = getOldMovies();
        var movies = getMovieArray(mvName, mvRating, oldMovies);
        storeToLocal(movies);
        addToList(mvName, mvRating);
    }

    function addToList(mvName, mvRating) {
        var list = document.getElementById('mvlist');
        var litem = document.createElement('li');
        litem.setAttribute("class","list-group-item");
        var txtNodeName = document.createTextNode(mvName);
        var txtNodeRating = document.createTextNode("," + mvRating);
        litem.appendChild(txtNodeName);
        litem.appendChild(txtNodeRating);
        list.appendChild(litem);
    }

    function onInit() {

        var oldMovies = getOldMovies();
        for (var i = 0; i < oldMovies.length; i++) {
            addToList(oldMovies[i].name, oldMovies[i].rating);
        }
    }

    function getMovieName() {
        var mvName = document.getElementById('mvname');
        return mvName.value;
    }

    function getMovieRating() {
        var mvRating = document.getElementById('mvrating');
        return mvRating.value;
    }

    function getOldMovies() {
        var oldMovies = JSON.parse(localStorage.getItem('movies'));
        if (oldMovies == null) {
            oldMovies = new Array();
        }
        return oldMovies;
    }

    function getMovieArray(mvName, mvRating, oldMovies) {
        var movies = new Array();
        if (oldMovies != null || oldMovies.length > 0) {
            movies = oldMovies;
        }
        var mvObject = new Movie(mvName, mvRating);

        movies.push(mvObject);
        return movies;
    }

    function storeToLocal(movies) {
        localStorage.setItem("movies", JSON.stringify(movies));
    }

    window.onload = onInit;
</script>
</body>
</html>